mixed-port: 7890
port: 7891
socks-port: 7892
allow-lan: true
mode: rule
log-level: warning
external-controller: "0.0.0.0:9090"
secret: "li19882008"
bind-address: "*"
ipv6: true
tcp-concurrent: true
unified-delay: true
find-process-mode: strict
tun:
  enable: false
  stack: mixed
  auto-route: true
  auto-detect-interface: true
dns:
  enable: true
  ipv6: true
  prefer-h3: false
  listen: "0.0.0.0:53"
  use-hosts: false
  use-system-hosts: false
  respect-rules: true
  enhanced-mode: "fake-ip"
  fake-ip-range: "198.18.0.1/16"
  fake-ip-filter:
    - "*"
    - +.lan
    - +.local
    - time.*.com
    - ntp.*.com
    - +.market.xiaomi.com
    - asusrouter.com
    - router.asus.com
    - www.asusrouter.com
    - oasisauth.h3c.com
    - routerlogin.com
    - www.routerlogin.com
    - tplogin.cn
    - miwifi.com
    - www.miwifi.com
    - +.internal
    - +.localdomain
    - +.example
    - +.invalid
    - +.localhost
    - +.test
    - +.local
    - +.lan
    - +.zte.home
    - +.my.router
    - +.ts.net
    - +.home.arpa
    - +.hiwifi.com
    - +.tplinkwifi.net
    - +.tendawifi.com
    - +.leike.cc
    - +.plex.direct
    - +.router.ctc
    - +.phicomm.me
    - +.peiluyou.com
    - +.127.in-addr.arpa
  default-nameserver:
    - tls://223.5.5.5
    - tls://119.29.29.29
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  direct-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

sniffer:
  enable: false
geodata-mode: false
geo-auto-update: true
geo-update-interval: 24
geodata-loader: memconservative
geox-url:
  geoip: "https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geoip.dat"
  geosite: "https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geosite.dat"
  mmdb: "https://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country.mmdb"
  asn: "https://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/GeoLite2-ASN.mmdb"
profile:
  store-selected: true
  store-fake-ip: true
BaseUT: &BaseUT { type: url-test, interval: 1800, lazy: true, url: 'https://cp.cloudflare.com/generate_204', hidden: false, include-all-proxies: true }
BaseSE: &BaseSE { type: select, interval: 1800, lazy: true, url: 'https://cp.cloudflare.com/generate_204', hidden: false, include-all-proxies: true }
BaseFB: &BaseFB { type: fallback, interval: 600, lazy: true, url: 'https://cp.cloudflare.com/generate_204', hidden: true, include-all-proxies: true }
BaseCR: &BaseCR { type: load-balance, interval: 600, lazy: true, url: 'https://cp.cloudflare.com/generate_204', hidden: true, strategy: round-robin, include-all-proxies: true }
SelectA: &SelectA { type: select, proxies: [ âœ… è‡ªåŠ¨é€‰æ‹©, âš–ï¸ è´Ÿè½½å‡è¡¡, ğŸ«± æ‰‹åŠ¨é€‰æ‹©, â­• æ•…éšœåˆ‡æ¢, ğŸ¯ å…¨çƒç›´è¿ ] }
SelectB: &SelectB { type: select, proxies: [ ğŸ¯ å…¨çƒç›´è¿, âœ… è‡ªåŠ¨é€‰æ‹©, âš–ï¸ è´Ÿè½½å‡è¡¡, ğŸ«± æ‰‹åŠ¨é€‰æ‹©, â­• æ•…éšœåˆ‡æ¢ ] }
SelectC: &SelectC { type: select, proxies: [DIRECT] }
SelectD: &SelectD { type: select, proxies: [REJECT] }

proxy-groups:
  - { name: ğŸ¥³ æ‰“åŒ…ä»£ç†,        <<: *SelectA }
  - { name: âœ… è‡ªåŠ¨é€‰æ‹©,        <<: *BaseUT }
  - { name: ğŸ«± æ‰‹åŠ¨é€‰æ‹©,        <<: *BaseSE }
  - { name: ğŸŸ æ¼ç½‘ä¹‹é±¼,        <<: *SelectA } 
  - { name: ğŸŒˆ Cloudflare,     <<: *SelectB }
  - { name: ğŸ¤¡ Onedrive,       <<: *SelectB }
  - { name: ğŸ¥Œ Microsoft,      <<: *SelectB }
  - { name: ğŸ’¯ Steam,          <<: *SelectA }
  - { name: âš–ï¸ è´Ÿè½½å‡è¡¡,        <<: *BaseCR }
  - { name: â­• æ•…éšœåˆ‡æ¢,        <<: *BaseFB }
  - { name: ğŸ¯ å…¨çƒç›´è¿,        <<: *SelectC, hidden: true }
  - { name: âš ï¸ å±è”½å¹¿å‘Š,        <<: *SelectD, hidden: true }

rule-anchor:
  BehaviorDN: &BehaviorDN { type: http, behavior: domain, proxy: DIRECT, format: mrs, interval: 86400 }
  BehaviorIP: &BehaviorIP { type: http, behavior: ipcidr, proxy: DIRECT, format: mrs, interval: 86400 }
  MyDN: &MyDN { type: http, behavior: domain, proxy: DIRECT, format: yaml, interval: 86400 }
  MyIP: &MyIP { type: http, behavior: ipcidr, proxy: DIRECT, format: yaml, interval: 86400 }

rule-providers:
  # åŸŸåè§„åˆ™é›†ğŸ”¥â˜”ï¸â˜ƒï¸ğŸŒ²ğŸŒ´ğŸğŸŒ·
  reject:         { <<: *MyDN, url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt, path: './ruleset/DN/reject.yaml' }
  China:          { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.mrs, path: './ruleset/DN/cn.mrs' }
  Github:         { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/github.mrs, path: './ruleset/DN/github.mrs' }
  Lan:            { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/private.mrs, path: './ruleset/DN/private.mrs' }
  Microsoft:      { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/microsoft.mrs, path: './ruleset/DN/microsoft.mrs' }
  OneDrive:       { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/onedrive.mrs, path: './ruleset/DN/onedrive.mrs' }
  Google:         { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/google.mrs, path: './ruleset/DN/google.mrs' }
  Steam:          { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/steam.mrs, path: './ruleset/DN/steam.mrs' }
  GFW:            { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/gfw.mrs, path: './ruleset/DN/gfw.mrs' }
  Telegram:       { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.mrs, path: './ruleset/DN/telegram.mrs' }
  TikTok:         { <<: *BehaviorDN, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/tiktok.mrs, path: './ruleset/DN/tiktok.mrs' }
  # IPè§„åˆ™é›†
  GoogleIP:       { <<: *BehaviorIP, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/google.mrs, path: './ruleset/IP/google.mrs' }
  TelegramIP:     { <<: *BehaviorIP, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/telegram.mrs, path: './ruleset/IP/telegram.mrs' }
  ChinaIP:        { <<: *BehaviorIP, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/cn.mrs, path: './ruleset/IP/cn.mrs' }
  LanIP:          { <<: *BehaviorIP, url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/private.mrs, path: './ruleset/IP/private.mrs' }

rules:
  # è‡ªå®šä¹‰è§„åˆ™
  - DOMAIN-SUFFIX,cloudflare.com,ğŸŒˆ Cloudflare
  - DOMAIN-SUFFIX,gstatic.com,ğŸ¥³ æ‰“åŒ…ä»£ç†
  - DOMAIN-SUFFIX,jsdelivr.net,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,19882008.xyz,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,lancelot.dpdns.org,ğŸ¯ å…¨çƒç›´è¿
  # åŸŸåè§„åˆ™é›†
  - RULE-SET,reject,âš ï¸ å±è”½å¹¿å‘Š
  - RULE-SET,Github,ğŸ¥³ æ‰“åŒ…ä»£ç†
  - RULE-SET,OneDrive,ğŸ¤¡ Onedrive
  - RULE-SET,Microsoft,ğŸ¥Œ Microsoft
  - RULE-SET,Google,ğŸ¥³ æ‰“åŒ…ä»£ç†
  - RULE-SET,Telegram,ğŸ¥³ æ‰“åŒ…ä»£ç†
  - RULE-SET,TikTok,ğŸ¥³ æ‰“åŒ…ä»£ç†
  - RULE-SET,Steam,ğŸ’¯ Steam
  - RULE-SET,GFW,ğŸ¥³ æ‰“åŒ…ä»£ç†
  - RULE-SET,Lan,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,China,ğŸ¯ å…¨çƒç›´è¿
  # IPè§„åˆ™é›†
  - RULE-SET,GoogleIP,ğŸ¥³ æ‰“åŒ…ä»£ç†,no-resolve
  - RULE-SET,TelegramIP,ğŸ¥³ æ‰“åŒ…ä»£ç†,no-resolve
  - RULE-SET,LanIP,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ChinaIP,ğŸ¯ å…¨çƒç›´è¿
  # é»˜è®¤è§„åˆ™
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

proxies:
  - {name: "[Vless] rs1 [igfxn] 1", server: cf.9999669.xyz, port: 2087, type: vless, uuid: 77777777-6663-4ef2-b26b-ed2d70642678, tls: true, tfo: true, skip-cert-verify: true, servername: igfxnvp1v.fx03.ccwu.cc, network: ws, ws-opts: {path: "/?ed=2560", headers: {Host: igfxnvp1v.fx03.ccwu.cc}}, udp: true, ech-opts: {enable: false, query-server-name: 'cloudflare-ech.com+https://dns.alidns.com/dns-query'}}
  - {name: "[Vless] rs1 [0jtfw] 2", server: mfa.gov.ua, port: 2087, type: vless, uuid: 77777777-6663-4ef2-b26b-ed2d70642678, tls: true, tfo: true, skip-cert-verify: true, servername: 0jtfwxxwpkv731.fx03.ccwu.cc, network: ws, ws-opts: {path: "/?ed=2560", headers: {Host: 0jtfwxxwpkv731.fx03.ccwu.cc}}, udp: true, ech-opts: {enable: false, query-server-name: 'cloudflare-ech.com+https://dns.alidns.com/dns-query'}}
  - {name: "[Vless] rs1 [f8qgx] 3", server: www.shopify.com, port: 2087, type: vless, uuid: 77777777-6663-4ef2-b26b-ed2d70642678, tls: true, tfo: true, skip-cert-verify: true, servername: f8qgxv51.fx03.ccwu.cc, network: ws, ws-opts: {path: "/?ed=2560", headers: {Host: f8qgxv51.fx03.ccwu.cc}}, udp: true, ech-opts: {enable: false, query-server-name: 'cloudflare-ech.com+https://dns.alidns.com/dns-query'}}
